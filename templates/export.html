{% extends "base.html" %}

{% block page_header %}
<div class="page-header-content text-center">
    <h1 class="page-title">Export</h1>
    <p class="page-subtitle">Veri dƒ±≈üa aktarma ve raporlama ara√ßlarƒ±</p>
</div>
{% endblock %}

{% block content %}
<div class="wrap">
        <div class="row">
            <div class="seg">
                <button onclick="window.location.href='/'">Dashboard</button>
                <button onclick="window.location.href='/analytics'">Analytics</button>
                <button onclick="window.location.href='/design'">Design</button>
                <button onclick="window.location.href='/analyze'">Analyze</button>
                <button onclick="window.location.href='/optimize'">Optimize</button>
                <button onclick="window.location.href='/report'">Report</button>
                <button class="active">Export</button>
                <button onclick="window.location.href='/settings'">Settings</button>
            </div>
        </div>
    </div>

    <!-- Export KPIs -->
    <div class="kpis">
        <div class="kpi">
            <div class="kpi-label">Toplam Dƒ±≈üa Aktarƒ±m</div>
            <div class="kpi-value">234</div>
        </div>
        <div class="kpi">
            <div class="kpi-label">Bu Ay</div>
            <div class="kpi-value">47</div>
        </div>
        <div class="kpi">
            <div class="kpi-label">Pop√ºler Format</div>
            <div class="kpi-value">PDF</div>
        </div>
        <div class="kpi">
            <div class="kpi-label">Toplam Boyut (MB)</div>
            <div class="kpi-value">1,240</div>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="grid">
        <!-- Export Configuration -->
        <div class="card">
            <div class="card-header">
                <h3>Dƒ±≈üa Aktarƒ±m Yapƒ±landƒ±rmasƒ±</h3>
                <div class="export-controls">
                    <button class="btn btn-ghost">√ñnizleme</button>
                    <button class="btn btn-primary">Dƒ±≈üa Aktar</button>
                </div>
            </div>
            <div class="export-config">
                <div class="config-tabs">
                    <button class="tab-btn active" data-tab="data">Veri</button>
                    <button class="tab-btn" data-tab="format">Format</button>
                    <button class="tab-btn" data-tab="options">Se√ßenekler</button>
                </div>
                
                <div class="tab-content active" id="data-tab">
                    <h4>Dƒ±≈üa Aktarƒ±lacak Veri</h4>
                    <div class="data-selection">
                        <div class="data-category">
                            <h5>Dashboard Verileri</h5>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>KPI Metrikleri</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>Emisyon Grafikleri</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox">
                                    <span>S√ºrd√ºr√ºlebilirlik Tablosu</span>
                                </label>
                            </div>
                        </div>
                        <div class="data-category">
                            <h5>Analiz Verileri</h5>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>LCA Sonu√ßlarƒ±</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox">
                                    <span>Karbon Ayak ƒ∞zi</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>Su Ayak ƒ∞zi</span>
                                </label>
                            </div>
                        </div>
                        <div class="data-category">
                            <h5>Optimizasyon Verileri</h5>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox">
                                    <span>Optimizasyon Senaryolarƒ±</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>ƒ∞yile≈ütirme √ñnerileri</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox">
                                    <span>Maliyet Analizi</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="format-tab">
                    <h4>Dƒ±≈üa Aktarƒ±m Formatƒ±</h4>
                    <div class="format-selection">
                        <div class="format-grid">
                            <div class="format-card active">
                                <div class="format-icon">üìÑ</div>
                                <h5>PDF</h5>
                                <p>Yazdƒ±rƒ±labilir rapor formatƒ±</p>
                                <span class="format-size">~2.5 MB</span>
                            </div>
                            <div class="format-card">
                                <div class="format-icon">üìä</div>
                                <h5>Excel</h5>
                                <p>Veri analizi i√ßin tablo formatƒ±</p>
                                <span class="format-size">~1.2 MB</span>
                            </div>
                            <div class="format-card">
                                <div class="format-icon">üìã</div>
                                <h5>CSV</h5>
                                <p>Ham veri formatƒ±</p>
                                <span class="format-size">~0.8 MB</span>
                            </div>
                            <div class="format-card">
                                <div class="format-icon">üåê</div>
                                <h5>JSON</h5>
                                <p>API entegrasyonu i√ßin</p>
                                <span class="format-size">~1.1 MB</span>
                            </div>
                            <div class="format-card">
                                <div class="format-icon">üìà</div>
                                <h5>PowerPoint</h5>
                                <p>Sunum formatƒ±</p>
                                <span class="format-size">~3.2 MB</span>
                            </div>
                            <div class="format-card">
                                <div class="format-icon">üñºÔ∏è</div>
                                <h5>PNG/SVG</h5>
                                <p>Grafik formatlarƒ±</p>
                                <span class="format-size">~0.5 MB</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="options-tab">
                    <h4>Dƒ±≈üa Aktarƒ±m Se√ßenekleri</h4>
                    <div class="options-grid">
                        <div class="option-section">
                            <h5>Tarih Aralƒ±ƒüƒ±</h5>
                            <div class="date-range">
                                <input type="date" class="form-input" value="2024-01-01">
                                <span>-</span>
                                <input type="date" class="form-input" value="2024-03-31">
                            </div>
                        </div>
                        <div class="option-section">
                            <h5>Dil Se√ßimi</h5>
                            <select class="form-select">
                                <option>T√ºrk√ße</option>
                                <option>English</option>
                                <option>Deutsch</option>
                                <option>Fran√ßais</option>
                            </select>
                        </div>
                        <div class="option-section">
                            <h5>Kalite Ayarlarƒ±</h5>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="quality" value="high" checked>
                                    <span>Y√ºksek Kalite</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="quality" value="medium">
                                    <span>Orta Kalite</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="quality" value="low">
                                    <span>D√º≈ü√ºk Kalite (Hƒ±zlƒ±)</span>
                                </label>
                            </div>
                        </div>
                        <div class="option-section">
                            <h5>Ek Se√ßenekler</h5>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>Logo ve Marka Bilgileri</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox">
                                    <span>Filigran Ekle</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" checked>
                                    <span>Metadata Dahil Et</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Queue -->
        <div class="card">
            <div class="card-header">
                <h3>Dƒ±≈üa Aktarƒ±m Kuyruƒüu</h3>
            </div>
            <div class="export-queue">
                <div class="queue-item processing">
                    <div class="queue-icon">‚è≥</div>
                    <div class="queue-details">
                        <h5>Q1 S√ºrd√ºr√ºlebilirlik Raporu</h5>
                        <p>PDF formatƒ±nda dƒ±≈üa aktarƒ±lƒ±yor...</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                    </div>
                    <div class="queue-status">
                        <span class="pill warning">ƒ∞≈üleniyor</span>
                    </div>
                </div>
                <div class="queue-item completed">
                    <div class="queue-icon">‚úÖ</div>
                    <div class="queue-details">
                        <h5>LCA Analiz Verileri</h5>
                        <p>Excel formatƒ±nda tamamlandƒ±</p>
                        <div class="queue-meta">2 dakika √∂nce ‚Ä¢ 1.2 MB</div>
                    </div>
                    <div class="queue-actions">
                        <button class="btn btn-ghost btn-sm">ƒ∞ndir</button>
                    </div>
                </div>
                <div class="queue-item completed">
                    <div class="queue-icon">‚úÖ</div>
                    <div class="queue-details">
                        <h5>Emisyon Grafikleri</h5>
                        <p>PNG formatƒ±nda tamamlandƒ±</p>
                        <div class="queue-meta">5 dakika √∂nce ‚Ä¢ 0.8 MB</div>
                    </div>
                    <div class="queue-actions">
                        <button class="btn btn-ghost btn-sm">ƒ∞ndir</button>
                    </div>
                </div>
                <div class="queue-item failed">
                    <div class="queue-icon">‚ùå</div>
                    <div class="queue-details">
                        <h5>Optimizasyon Senaryolarƒ±</h5>
                        <p>Dƒ±≈üa aktarƒ±m ba≈üarƒ±sƒ±z</p>
                        <div class="queue-meta">10 dakika √∂nce ‚Ä¢ Hata: Veri bulunamadƒ±</div>
                    </div>
                    <div class="queue-actions">
                        <button class="btn btn-ghost btn-sm">Yeniden Dene</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Secondary Grid -->
    <div class="grid">
        <!-- Export History -->
        <div class="card">
            <div class="card-header">
                <h3>Dƒ±≈üa Aktarƒ±m Ge√ßmi≈üi</h3>
                <div class="history-filters">
                    <button class="pill active">T√ºm√º</button>
                    <button class="pill">Bu Hafta</button>
                    <button class="pill">Bu Ay</button>
                </div>
            </div>
            <div class="export-history">
                <div class="history-item">
                    <div class="history-date">15 Mart 2024</div>
                    <div class="history-details">
                        <h5>Dashboard Verileri</h5>
                        <p>PDF ‚Ä¢ 2.1 MB ‚Ä¢ 47 indirme</p>
                    </div>
                    <button class="btn btn-ghost btn-sm">Yeniden ƒ∞ndir</button>
                </div>
                <div class="history-item">
                    <div class="history-date">12 Mart 2024</div>
                    <div class="history-details">
                        <h5>LCA Raporu</h5>
                        <p>Excel ‚Ä¢ 1.8 MB ‚Ä¢ 23 indirme</p>
                    </div>
                    <button class="btn btn-ghost btn-sm">Yeniden ƒ∞ndir</button>
                </div>
                <div class="history-item">
                    <div class="history-date">8 Mart 2024</div>
                    <div class="history-details">
                        <h5>S√ºrd√ºr√ºlebilirlik Metrikleri</h5>
                        <p>JSON ‚Ä¢ 0.9 MB ‚Ä¢ 12 indirme</p>
                    </div>
                    <button class="btn btn-ghost btn-sm">Yeniden ƒ∞ndir</button>
                </div>
                <div class="history-item">
                    <div class="history-date">5 Mart 2024</div>
                    <div class="history-details">
                        <h5>Emisyon Analizi</h5>
                        <p>PowerPoint ‚Ä¢ 3.4 MB ‚Ä¢ 31 indirme</p>
                    </div>
                    <button class="btn btn-ghost btn-sm">Yeniden ƒ∞ndir</button>
                </div>
            </div>
        </div>

        <!-- Export Statistics -->
        <div class="card">
            <div class="card-header">
                <h3>Dƒ±≈üa Aktarƒ±m ƒ∞statistikleri</h3>
            </div>
            <div class="export-stats">
                <div class="stat-chart">
                    <canvas id="exportChart" width="400" height="200"></canvas>
                </div>
                <div class="stat-summary">
                    <div class="stat-item">
                        <div class="stat-label">En Pop√ºler Format</div>
                        <div class="stat-value">PDF (45%)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Ortalama Dosya Boyutu</div>
                        <div class="stat-value">1.8 MB</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Toplam ƒ∞ndirme</div>
                        <div class="stat-value">1,247</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Ba≈üarƒ± Oranƒ±</div>
                        <div class="stat-value">96.2%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Tab functionality
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const tabId = btn.dataset.tab;
        
        // Update active tab button
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Update active tab content
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        document.getElementById(tabId + '-tab').classList.add('active');
    });
});

// Format card selection
document.querySelectorAll('.format-card').forEach(card => {
    card.addEventListener('click', () => {
        document.querySelectorAll('.format-card').forEach(c => c.classList.remove('active'));
        card.classList.add('active');
    });
});

// Export Statistics Chart
const exportCtx = document.getElementById('exportChart').getContext('2d');
const exportChart = new Chart(exportCtx, {
    type: 'doughnut',
    data: {
        labels: ['PDF', 'Excel', 'CSV', 'JSON', 'PowerPoint', 'PNG/SVG'],
        datasets: [{
            data: [45, 25, 12, 8, 7, 3],
            backgroundColor: [
                '#3b82f6',
                '#10b981',
                '#f59e0b',
                '#ef4444',
                '#8b5cf6',
                '#06b6d4'
            ],
            borderWidth: 0
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'bottom',
                labels: {
                    color: '#e5e7eb',
                    padding: 15,
                    usePointStyle: true
                }
            }
        }
    }
});
</script>

<style>
.export-controls {
    display: flex;
    gap: 8px;
}

.export-config {
    padding: 16px;
}

.config-tabs {
    display: flex;
    gap: 4px;
    margin-bottom: 24px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    padding: 4px;
}

.tab-btn {
    flex: 1;
    padding: 8px 16px;
    background: transparent;
    border: none;
    color: var(--muted);
    font-size: 14px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.tab-btn.active {
    background: var(--accent);
    color: white;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.tab-content h4 {
    margin: 0 0 16px 0;
    color: var(--ink);
    font-size: 16px;
    font-weight: 600;
}

.data-selection {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 24px;
}

.data-category h5 {
    margin: 0 0 12px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.checkbox-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.checkbox-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}

.checkbox-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.checkbox-item input {
    margin: 0;
}

.checkbox-item span {
    color: var(--ink);
    font-size: 14px;
}

.format-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
}

.format-card {
    padding: 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.format-card:hover {
    background: rgba(255, 255, 255, 0.08);
}

.format-card.active {
    border-color: var(--accent);
    background: rgba(59, 130, 246, 0.1);
}

.format-icon {
    font-size: 32px;
    margin-bottom: 8px;
}

.format-card h5 {
    margin: 0 0 4px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.format-card p {
    margin: 0 0 8px 0;
    color: var(--muted);
    font-size: 12px;
}

.format-size {
    color: var(--muted);
    font-size: 11px;
    font-weight: 500;
}

.options-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 24px;
}

.option-section h5 {
    margin: 0 0 8px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.date-range {
    display: flex;
    align-items: center;
    gap: 8px;
}

.form-input,
.form-select {
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--ink);
    font-size: 14px;
}

.form-input:focus,
.form-select:focus {
    outline: none;
    border-color: var(--accent);
}

.radio-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.radio-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px;
    cursor: pointer;
}

.radio-item input {
    margin: 0;
}

.radio-item span {
    color: var(--ink);
    font-size: 14px;
}

.export-queue {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.queue-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
}

.queue-icon {
    font-size: 20px;
    flex-shrink: 0;
}

.queue-details {
    flex: 1;
}

.queue-details h5 {
    margin: 0 0 4px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.queue-details p {
    margin: 0 0 8px 0;
    color: var(--muted);
    font-size: 12px;
}

.progress-bar {
    height: 4px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: var(--accent);
    transition: width 0.3s ease;
}

.queue-meta {
    color: var(--muted);
    font-size: 11px;
}

.queue-actions {
    display: flex;
    gap: 8px;
}

.history-filters {
    display: flex;
    gap: 8px;
}

.export-history {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.history-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
}

.history-date {
    color: var(--muted);
    font-size: 12px;
    min-width: 80px;
}

.history-details {
    flex: 1;
}

.history-details h5 {
    margin: 0 0 2px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.history-details p {
    margin: 0;
    color: var(--muted);
    font-size: 12px;
}

.export-stats {
    padding: 16px;
}

.stat-chart {
    height: 200px;
    margin-bottom: 24px;
}

.stat-summary {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
}

.stat-item {
    text-align: center;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
}

.stat-label {
    color: var(--muted);
    font-size: 12px;
    margin-bottom: 4px;
}

.stat-value {
    color: var(--ink);
    font-size: 16px;
    font-weight: 600;
}

.btn-sm {
    padding: 4px 8px;
    font-size: 12px;
}
</style>
{% endblock %}