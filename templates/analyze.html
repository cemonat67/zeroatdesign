{% extends "base.html" %}

{% block page_header %}
<div class="page-header-content text-center">
    <h1 class="page-title">Analyze</h1>
    <p class="page-subtitle">Karbon ayak izi analizi ve s√ºrd√ºr√ºlebilirlik deƒüerlendirmesi</p>
</div>
{% endblock %}

{% block content %}
<div class="wrap">
        <div class="row">
            <div class="seg">
                <button onclick="window.location.href='/'">Dashboard</button>
                <button onclick="window.location.href='/analytics'">Analytics</button>
                <button onclick="window.location.href='/design'">Design</button>
                <button class="active">Analyze</button>
                <button onclick="window.location.href='/optimize'">Optimize</button>
                <button onclick="window.location.href='/report'">Report</button>
                <button onclick="window.location.href='/export'">Export</button>
                <button onclick="window.location.href='/settings'">Settings</button>
            </div>
        </div>
    </div>

    <!-- Analysis KPIs -->
    <div class="kpis">
        <div class="kpi">
            <div class="kpi-label">Analiz Edilen √úr√ºnler</div>
            <div class="kpi-value">89</div>
        </div>
        <div class="kpi">
            <div class="kpi-label">Ortalama LCA Skoru</div>
            <div class="kpi-value">7.8</div>
        </div>
        <div class="kpi">
            <div class="kpi-label">ƒ∞yile≈ütirme Potansiyeli (%)</div>
            <div class="kpi-value">34</div>
        </div>
        <div class="kpi">
            <div class="kpi-label">Toplam CO‚ÇÇe Analizi (t)</div>
            <div class="kpi-value">156.7</div>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="grid">
        <!-- Product Analysis -->
        <div class="card">
            <div class="card-header">
                <h3>√úr√ºn Analizi</h3>
                <div class="analysis-controls">
                    <button class="btn btn-ghost">Yeni Analiz</button>
                    <button class="btn btn-ghost">Kar≈üƒ±la≈ütƒ±r</button>
                    <button class="btn btn-ghost">Rapor Al</button>
                </div>
            </div>
            <div class="analysis-container">
                <div class="product-selector">
                    <h4>Analiz Edilecek √úr√ºn</h4>
                    <select class="form-select">
                        <option>Organik Pamuk T-Shirt</option>
                        <option>Geri D√∂n√º≈üt√ºr√ºlm√º≈ü Polyester Ceket</option>
                        <option>Bambu Lifi Elbise</option>
                        <option>Kenevir Pantolon</option>
                    </select>
                </div>
                <div class="analysis-metrics">
                    <div class="metric-card">
                        <h5>Ya≈üam D√∂ng√ºs√º Analizi</h5>
                        <div class="metric-value">8.2/10</div>
                        <div class="metric-trend positive">+0.3</div>
                    </div>
                    <div class="metric-card">
                        <h5>Karbon Ayak ƒ∞zi</h5>
                        <div class="metric-value">2.1 kg CO‚ÇÇe</div>
                        <div class="metric-trend negative">-0.4</div>
                    </div>
                    <div class="metric-card">
                        <h5>Su Ayak ƒ∞zi</h5>
                        <div class="metric-value">1,240 L</div>
                        <div class="metric-trend positive">-180</div>
                    </div>
                    <div class="metric-card">
                        <h5>Geri D√∂n√º≈ü√ºm Oranƒ±</h5>
                        <div class="metric-value">85%</div>
                        <div class="metric-trend positive">+5%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Impact Analysis Chart -->
        <div class="card">
            <div class="card-header">
                <h3>Etki Analizi ‚Äî Kategori Bazƒ±nda</h3>
                <div class="chart-controls">
                    <button class="pill active">CO‚ÇÇe</button>
                    <button class="pill">Su</button>
                    <button class="pill">Enerji</button>
                    <button class="pill">Atƒ±k</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="impactChart" width="400" height="200"></canvas>
            </div>
        </div>
    </div>

    <!-- Secondary Grid -->
    <div class="grid">
        <!-- Comparison Table -->
        <div class="card">
            <div class="card-header">
                <h3>√úr√ºn Kar≈üƒ±la≈ütƒ±rmasƒ±</h3>
            </div>
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>√úr√ºn</th>
                            <th>LCA Skoru</th>
                            <th>CO‚ÇÇe (kg)</th>
                            <th>Su (L)</th>
                            <th>Geri D√∂n√º≈ü√ºm (%)</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Organik Pamuk T-Shirt</td>
                            <td>8.2</td>
                            <td>2.1</td>
                            <td>1,240</td>
                            <td>85%</td>
                            <td><span class="pill success">M√ºkemmel</span></td>
                        </tr>
                        <tr>
                            <td>Geri D√∂n√º≈üt√ºr√ºlm√º≈ü Ceket</td>
                            <td>7.8</td>
                            <td>3.2</td>
                            <td>890</td>
                            <td>92%</td>
                            <td><span class="pill success">ƒ∞yi</span></td>
                        </tr>
                        <tr>
                            <td>Bambu Lifi Elbise</td>
                            <td>8.9</td>
                            <td>1.6</td>
                            <td>780</td>
                            <td>78%</td>
                            <td><span class="pill success">M√ºkemmel</span></td>
                        </tr>
                        <tr>
                            <td>Kenevir Pantolon</td>
                            <td>9.1</td>
                            <td>1.2</td>
                            <td>650</td>
                            <td>88%</td>
                            <td><span class="pill success">√úst√ºn</span></td>
                        </tr>
                        <tr>
                            <td>Konvansiyonel Pamuk</td>
                            <td>4.2</td>
                            <td>5.8</td>
                            <td>2,700</td>
                            <td>15%</td>
                            <td><span class="pill danger">Zayƒ±f</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- AI Insights -->
        <div class="card">
            <div class="card-header">
                <h3>AI Analiz √ñng√∂r√ºleri</h3>
            </div>
            <div class="insights-container">
                <div class="insight-item">
                    <div class="insight-icon">üîç</div>
                    <div class="insight-content">
                        <h4>Kritik Bulgular</h4>
                        <p>Organik pamuk kullanƒ±mƒ± su t√ºketimini %54 azaltƒ±yor ancak √ºretim maliyeti %23 artƒ±yor.</p>
                        <span class="pill warning">Dikkat</span>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">üìä</div>
                    <div class="insight-content">
                        <h4>Trend Analizi</h4>
                        <p>Son 6 ayda s√ºrd√ºr√ºlebilir malzeme kullanƒ±mƒ± %45 artƒ±≈ü g√∂sterdi.</p>
                        <span class="pill success">Pozitif</span>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">üéØ</div>
                    <div class="insight-content">
                        <h4>Optimizasyon √ñnerisi</h4>
                        <p>Kenevir lifi kullanarak toplam √ßevresel etkiyi %38 azaltabilirsiniz.</p>
                        <span class="pill success">Y√ºksek Potansiyel</span>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">‚ö°</div>
                    <div class="insight-content">
                        <h4>Hƒ±zlƒ± ƒ∞yile≈ütirme</h4>
                        <p>Boyama s√ºrecinde doƒüal boyalar kullanarak CO‚ÇÇe emisyonunu %15 d√º≈ü√ºr√ºn.</p>
                        <span class="pill info">Kolay</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Impact Analysis Chart
const impactCtx = document.getElementById('impactChart').getContext('2d');
const impactChart = new Chart(impactCtx, {
    type: 'radar',
    data: {
        labels: ['Hammadde', '√úretim', 'Boyama', 'Paketleme', 'Nakliye', 'Kullanƒ±m', 'Atƒ±k'],
        datasets: [{
            label: 'Mevcut √úr√ºn',
            data: [8.2, 7.5, 6.8, 8.9, 7.2, 9.1, 8.5],
            backgroundColor: 'rgba(59, 130, 246, 0.2)',
            borderColor: 'rgba(59, 130, 246, 1)',
            borderWidth: 2,
            pointBackgroundColor: 'rgba(59, 130, 246, 1)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
        }, {
            label: 'Sekt√∂r Ortalamasƒ±',
            data: [5.2, 4.8, 4.2, 6.1, 5.5, 6.8, 5.9],
            backgroundColor: 'rgba(239, 68, 68, 0.2)',
            borderColor: 'rgba(239, 68, 68, 1)',
            borderWidth: 2,
            pointBackgroundColor: 'rgba(239, 68, 68, 1)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgba(239, 68, 68, 1)'
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: {
                    color: '#e5e7eb'
                }
            }
        },
        scales: {
            r: {
                angleLines: {
                    color: 'rgba(255, 255, 255, 0.1)'
                },
                grid: {
                    color: 'rgba(255, 255, 255, 0.1)'
                },
                pointLabels: {
                    color: '#9ca3af',
                    font: {
                        size: 12
                    }
                },
                ticks: {
                    color: '#6b7280',
                    backdropColor: 'transparent'
                }
            }
        }
    }
});
</script>

<style>
.analysis-controls {
    display: flex;
    gap: 8px;
}

.analysis-container {
    padding: 16px;
}

.product-selector {
    margin-bottom: 24px;
}

.product-selector h4 {
    margin: 0 0 8px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.form-select {
    width: 100%;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    color: var(--ink);
    font-size: 14px;
}

.form-select:focus {
    outline: none;
    border-color: var(--accent);
}

.analysis-metrics {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.metric-card {
    padding: 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    text-align: center;
}

.metric-card h5 {
    margin: 0 0 8px 0;
    color: var(--muted);
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
}

.metric-value {
    font-size: 24px;
    font-weight: 700;
    color: var(--ink);
    margin-bottom: 4px;
}

.metric-trend {
    font-size: 12px;
    font-weight: 600;
}

.metric-trend.positive {
    color: #10b981;
}

.metric-trend.negative {
    color: #ef4444;
}

.chart-controls {
    display: flex;
    gap: 8px;
}

.chart-container {
    height: 300px;
    padding: 16px;
}

.insights-container {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.insight-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
}

.insight-icon {
    font-size: 24px;
    flex-shrink: 0;
}

.insight-content h4 {
    margin: 0 0 4px 0;
    color: var(--ink);
    font-size: 14px;
    font-weight: 600;
}

.insight-content p {
    margin: 0 0 8px 0;
    color: var(--muted);
    font-size: 13px;
    line-height: 1.4;
}

.pill.info {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

.pill.danger {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
}
</style>
{% endblock %}